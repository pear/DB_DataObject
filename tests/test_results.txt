--TEST--
DB::DataObject test
--SKIPIF--
--FILE--
test   : QUERY       : DROP TABLE IF EXISTS test
test   : QUERY       : DROP TABLE IF EXISTS test2
test   : QUERY       : DROP TABLE IF EXISTS testproxy
test   : QUERY       : DROP TABLE IF EXISTS testproxy2
test   : QUERY       : DROP TABLE IF EXISTS testproxy2_seq
test   : QUERY       : DROP TABLE IF EXISTS testset
test   : QUERY       : CREATE TABLE test (
              id int(11) NOT NULL auto_increment PRIMARY KEY,
              name varchar(255) NOT NULL default '',
              username varchar(32) NOT NULL default '',
              password varchar(13) binary NOT NULL default '',
              firstname varchar(255) NOT NULL default '',
              lastname varchar(255) NOT NULL default '' 
            )
test   : QUERY       : CREATE TABLE test2 (
              id int(11) NOT NULL PRIMARY KEY,
              name varchar(255) NOT NULL default '',
              username varchar(32) NOT NULL default '',
              password varchar(13) binary NOT NULL default '',
              firstname varchar(255) NOT NULL default '',
              lastname varchar(255) NOT NULL default '' 
            )
test   : QUERY       : CREATE TABLE testproxy (
              id int(11) NOT NULL  auto_increment PRIMARY KEY,
              name varchar(255) NOT NULL default '',
              username varchar(32) NOT NULL default '',
              password varchar(13) binary NOT NULL default '',
              firstname varchar(255) NOT NULL default '',
              lastname varchar(255) NOT NULL default '' 
            )
test   : QUERY       : CREATE TABLE testproxy2 (
              id int(11) NOT NULL PRIMARY KEY,
              name varchar(255) NOT NULL default '',
              username varchar(32) NOT NULL default '',
              password varchar(13) binary NOT NULL default '',
              firstname varchar(255) NOT NULL default '',
              lastname varchar(255) NOT NULL default '' 
            ) TYPE = InnoDB
test   : QUERY       : CREATE TABLE testproxy2_seq
                (id INTEGER UNSIGNED NOT NULL, PRIMARY KEY(id)) 
                TYPE = InnoDB
test   : QUERY       : INSERT INTO testproxy2_seq VALUES(0)
test   : QUERY       : CREATE TABLE testset (
              id int(11) NOT NULL auto_increment PRIMARY KEY,
              name varchar(255) NOT NULL default '',
              gender SET('male','female', 'not quite sure')
            )



******create database' 
test   : QUERY       : INSERT INTO test (name , username ) VALUES ('test' , 'username' ) 
INSERT got 1
myproject_dataobject_test   : __find       : 
myproject_dataobject_test   : QUERY       : SELECT * FROM test     
myproject_dataobject_test   : __find       : CHECK autofetchd 
myproject_dataobject_test   : __find       : DONE
myproject_dataobject_test   : FETCH       : a:6:{s:2:"id";s:1:"1";s:4:"name";s:4:"test";s:8:"username";s:8:"username";s:8:"password";s:0:"";s:9:"firstname";s:0:"";s:8:"lastname";s:0:"";}
myproject_dataobject_test Object
(
    [N] => 1
    [id] => 1
    [name] => test
    [username] => username
    [password] => 
    [firstname] => 
    [lastname] => 
)
myproject_dataobject_test   : FETCH       : N;



******delete everything with test and 'username' 
test   : QUERY       : DELETE FROM test  WHERE  test.name  = 'test' AND  test.username  = 'username'
test   : 1       : Clearing Cache for test
myproject_dataobject_test   : __find       : 
myproject_dataobject_test   : QUERY       : SELECT * FROM test     
myproject_dataobject_test   : __find       : CHECK autofetchd 
myproject_dataobject_test   : __find       : DONE
NO RESULTS!



***** update everything with username to firstname = 'fred' *
test   : QUERY       : INSERT INTO test (name , username ) VALUES ('test' , 'username' ) 
INSERT got 2
test   : 3       : got keys as a:1:{i:0;s:2:"id";}
test   : QUERY       : UPDATE  test  SET firstname = 'fred'   WHERE username = 'username' 
test   : 1       : Clearing Cache for test
myproject_dataobject_test   : __find       : 
myproject_dataobject_test   : QUERY       : SELECT * FROM test     
myproject_dataobject_test   : __find       : CHECK autofetchd 
myproject_dataobject_test   : __find       : DONE
myproject_dataobject_test   : FETCH       : a:6:{s:2:"id";s:1:"2";s:4:"name";s:4:"test";s:8:"username";s:8:"username";s:8:"password";s:0:"";s:9:"firstname";s:4:"fred";s:8:"lastname";s:0:"";}
myproject_dataobject_test Object
(
    [N] => 1
    [id] => 2
    [name] => test
    [username] => username
    [password] => 
    [firstname] => fred
    [lastname] => 
)
myproject_dataobject_test   : FETCH       : N;



****** now update based on key
test   : GET       : id 2 Array
(
    [0] => id
)

test   : __find       : 1
test   : QUERY       : SELECT * FROM test  WHERE  test.id = 2    
test   : __find       : CHECK autofetchd 1
test   : __find       : ABOUT TO AUTOFETCH
test   : FETCH       : a:6:{s:2:"id";s:1:"2";s:4:"name";s:4:"test";s:8:"username";s:8:"username";s:8:"password";s:0:"";s:9:"firstname";s:4:"fred";s:8:"lastname";s:0:"";}
test   : __find       : DONE
test   : 3       : got keys as a:1:{i:0;s:2:"id";}
test   : QUERY       : UPDATE  test  SET name = 'test' , username = 'username' , password = '' , firstname = 'brian' , lastname = ''   WHERE  test.id = 2 
test   : 1       : Clearing Cache for test
myproject_dataobject_test   : __find       : 
myproject_dataobject_test   : QUERY       : SELECT * FROM test     
myproject_dataobject_test   : __find       : CHECK autofetchd 
myproject_dataobject_test   : __find       : DONE
myproject_dataobject_test   : FETCH       : a:6:{s:2:"id";s:1:"2";s:4:"name";s:4:"test";s:8:"username";s:8:"username";s:8:"password";s:0:"";s:9:"firstname";s:5:"brian";s:8:"lastname";s:0:"";}
myproject_dataobject_test Object
(
    [N] => 1
    [id] => 2
    [name] => test
    [username] => username
    [password] => 
    [firstname] => brian
    [lastname] => 
)
myproject_dataobject_test   : FETCH       : N;



****** toArray on only fetched keys.
test   : __find       : 1
test   : QUERY       : SELECT  firstname,lastname  FROM test  WHERE  test.id = 2    
test   : __find       : CHECK autofetchd 1
test   : __find       : ABOUT TO AUTOFETCH
test   : FETCH       : a:2:{s:9:"firstname";s:5:"brian";s:8:"lastname";s:0:"";}
test   : __find       : DONE
Array
(
    [firstname] => brian
    [lastname] => 
    [id] => 2
    [name] => 
    [username] => 
    [password] => 
)



****** now update using changed items only
test   : GET       : id 2 Array
(
    [0] => id
)

test   : __find       : 1
test   : QUERY       : SELECT * FROM test  WHERE  test.id = 2    
test   : __find       : CHECK autofetchd 1
test   : __find       : ABOUT TO AUTOFETCH
test   : FETCH       : a:6:{s:2:"id";s:1:"2";s:4:"name";s:4:"test";s:8:"username";s:8:"username";s:8:"password";s:0:"";s:9:"firstname";s:5:"brian";s:8:"lastname";s:0:"";}
test   : __find       : DONE
test   : 3       : got keys as a:1:{i:0;s:2:"id";}
test   : QUERY       : UPDATE  test  SET firstname = 'jones'   WHERE  test.id = 2 
test   : 1       : Clearing Cache for test
myproject_dataobject_test   : __find       : 
myproject_dataobject_test   : QUERY       : SELECT * FROM test     
myproject_dataobject_test   : __find       : CHECK autofetchd 
myproject_dataobject_test   : __find       : DONE
myproject_dataobject_test   : FETCH       : a:6:{s:2:"id";s:1:"2";s:4:"name";s:4:"test";s:8:"username";s:8:"username";s:8:"password";s:0:"";s:9:"firstname";s:5:"jones";s:8:"lastname";s:0:"";}
myproject_dataobject_test Object
(
    [N] => 1
    [id] => 2
    [name] => test
    [username] => username
    [password] => 
    [firstname] => jones
    [lastname] => 
)
myproject_dataobject_test   : FETCH       : N;



****** now update using changed items only
Array
(
    [user[id]] => 2
    [user[name]] => test
    [user[username]] => username
    [user[password]] => 
    [user[firstname]] => jones
    [user[lastname]] => 
)



****** limited queries 1
test   : __find       : 
test   : QUERY       : SELECT * FROM test      LIMIT 1
test   : __find       : CHECK autofetchd 
test   : __find       : DONE
test   : FETCH       : a:6:{s:2:"id";s:1:"2";s:4:"name";s:4:"test";s:8:"username";s:8:"username";s:8:"password";s:0:"";s:9:"firstname";s:5:"jones";s:8:"lastname";s:0:"";}



****** limited queries 1,1
test   : __find       : 
test   : QUERY       : SELECT * FROM test      LIMIT 1, 1
test   : __find       : CHECK autofetchd 
test   : __find       : DONE



****** to Array on empty result
Array
(
    [user[id]] => 
    [user[name]] => 
    [user[username]] => 
    [user[password]] => 
    [user[firstname]] => 
    [user[lastname]] => 
)



******get and delete an object key
test   : GET       : id 2 Array
(
    [0] => id
)

test   : __find       : 1
test   : QUERY       : SELECT * FROM test  WHERE  test.id = 2    
test   : __find       : CHECK autofetchd 1
test   : __find       : ABOUT TO AUTOFETCH
test   : FETCH       : a:6:{s:2:"id";s:1:"2";s:4:"name";s:4:"test";s:8:"username";s:8:"username";s:8:"password";s:0:"";s:9:"firstname";s:5:"jones";s:8:"lastname";s:0:"";}
test   : __find       : DONE
test   : QUERY       : DELETE FROM test  WHERE  test.id = 2
test   : 1       : Clearing Cache for test



******changing database stuff.
test   : QUERY       : BEGIN
test   : QUERY       : INSERT INTO test (name , username , password , firstname , lastname ) VALUES ('test' , 'xxx' , '' , 'jones' , '' ) 
test   : QUERY       : ROLLBACK
myproject_dataobject_testproxy2   : __find       : 
myproject_dataobject_testproxy2   : QUERY       : SELECT * FROM testproxy2     
myproject_dataobject_testproxy2   : __find       : CHECK autofetchd 
myproject_dataobject_testproxy2   : __find       : DONE
NO RESULTS!
test   : QUERY       : BEGIN
test   : QUERY       : INSERT INTO test (name , username , password , firstname , lastname ) VALUES ('test' , 'yyy' , '' , 'jones' , '' ) 
test   : QUERY       : COMMIT
myproject_dataobject_testproxy2   : __find       : 
myproject_dataobject_testproxy2   : QUERY       : SELECT * FROM testproxy2     
myproject_dataobject_testproxy2   : __find       : CHECK autofetchd 
myproject_dataobject_testproxy2   : __find       : DONE
NO RESULTS!
test   : QUERY       : INSERT INTO test (name , username , password , firstname , lastname ) VALUES ('test' , 'qqqqqq' , '' , 'jones' , '' ) 
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject   : QUERY       : DROP TABLE  IF EXISTS player_has_stats
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject   : QUERY       : 
            CREATE TABLE `player_has_stats` (
                  `player_id` int(10) unsigned NOT NULL default '0',
                  `deaths` int(10) unsigned NOT NULL default '0',
                  `kills` int(10) unsigned NOT NULL default '0',
                  PRIMARY KEY  (`player_id`)
                ) TYPE=MyISAM
                
             
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject_generator   : CONNECT       : USING CACHED CONNECTION
db_dataobject_generator   : fillTable       : getting def for test/player_has_stats
db_dataobject_generator   : defs       : Array
(
    [0] => Array
        (
            [table] => player_has_stats
            [name] => player_id
            [type] => int
            [len] => 10
            [flags] => not_null primary_key unsigned
        )

    [1] => Array
        (
            [table] => player_has_stats
            [name] => deaths
            [type] => int
            [len] => 10
            [flags] => not_null unsigned
        )

    [2] => Array
        (
            [table] => player_has_stats
            [name] => kills
            [type] => int
            [len] => 10
            [flags] => not_null unsigned
        )

)

TABLE STRUCTURE FOR player_has_stats
Array
(
    [0] => stdClass Object
        (
            [table] => player_has_stats
            [name] => player_id
            [type] => int
            [len] => 10
            [flags] => not_null primary_key unsigned
        )

    [1] => stdClass Object
        (
            [table] => player_has_stats
            [name] => deaths
            [type] => int
            [len] => 10
            [flags] => not_null unsigned
        )

    [2] => stdClass Object
        (
            [table] => player_has_stats
            [name] => kills
            [type] => int
            [len] => 10
            [flags] => not_null unsigned
        )

)
db_dataobject_generator   : CONNECT       : USING CACHED CONNECTION
Array
(
    [0] => dump for player_has_stats
    [1] => Array
        (
            [table] => Array
                (
                    [player_id] => 129
                    [deaths] => 129
                    [kills] => 129
                )

            [keys] => Array
                (
                    [player_id] => K
                )

        )

)
myproject_dataobject_player_has_stats   : CONNECT       : USING CACHED CONNECTION
array(3) {
  [0]=>
  bool(false)
  [1]=>
  bool(false)
  [2]=>
  bool(false)
}
myproject_dataobject_player_has_stats Object
(
    [_DB_DataObject_version] => @version@
    [__table] => player_has_stats
    [N] => 0
    [_database_dsn] => 
    [_database_dsn_md5] => 2f3fb5552c1aaa2a1ddef961a3506ebc
    [_database] => test
    [_query] => Array
        (
            [condition] => 
            [group_by] => 
            [order_by] => 
            [having] => 
            [limit] => 
            [data_select] => *
        )

    [_DB_resultid] => 
    [_link_loaded] => 
    [_join] => 
    [_lastError] => 
    [player_id] => 
    [deaths] => 
    [kills] => 
)
myproject_dataobject_player_has_stats   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_player_has_stats   : QUERY       : INSERT INTO player_has_stats (player_id ) VALUES ( 13 ) 



Bug #2267 ******enum test  
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject   : QUERY       : DROP TABLE  IF EXISTS Client
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject   : QUERY       : 
            CREATE TABLE `Client` (
              `clientID` smallint(3) unsigned NOT NULL auto_increment,
              `client` varchar(100) NOT NULL default '',
              `type` enum('Agência','Anunciante') NOT NULL default 'Agência',
              `contact` varchar(100) NOT NULL default '',
              `email` varchar(60) NOT NULL default '',
              `signup` date NOT NULL default '0000-00-00',
              PRIMARY KEY  (`clientID`)
            )  
             
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject   : QUERY       : INSERT INTO `Client` VALUES (30, 'Internet', 'Anunciante', 'Leandro S.',
                'leandro@s.com', '2004-09-01');
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject   : QUERY       : INSERT INTO `Client` VALUES (26, 'Grupos', 'Agência', 'Gian',
            'gian@email.com', '2004-09-01');
client   : CONNECT       : USING CACHED CONNECTION
db_dataobject_generator   : CONNECT       : USING CACHED CONNECTION
db_dataobject_generator   : fillTable       : getting def for test/Client
db_dataobject_generator   : defs       : Array
(
    [0] => Array
        (
            [table] => Client
            [name] => clientID
            [type] => int
            [len] => 3
            [flags] => not_null primary_key unsigned auto_increment
        )

    [1] => Array
        (
            [table] => Client
            [name] => client
            [type] => string
            [len] => 100
            [flags] => not_null
        )

    [2] => Array
        (
            [table] => Client
            [name] => type
            [type] => string
            [len] => 10
            [flags] => not_null enum
        )

    [3] => Array
        (
            [table] => Client
            [name] => contact
            [type] => string
            [len] => 100
            [flags] => not_null
        )

    [4] => Array
        (
            [table] => Client
            [name] => email
            [type] => string
            [len] => 60
            [flags] => not_null
        )

    [5] => Array
        (
            [table] => Client
            [name] => signup
            [type] => date
            [len] => 10
            [flags] => not_null
        )

)

TABLE STRUCTURE FOR Client
Array
(
    [0] => stdClass Object
        (
            [table] => Client
            [name] => clientID
            [type] => int
            [len] => 3
            [flags] => not_null primary_key unsigned auto_increment
        )

    [1] => stdClass Object
        (
            [table] => Client
            [name] => client
            [type] => string
            [len] => 100
            [flags] => not_null
        )

    [2] => stdClass Object
        (
            [table] => Client
            [name] => type
            [type] => string
            [len] => 10
            [flags] => not_null enum
        )

    [3] => stdClass Object
        (
            [table] => Client
            [name] => contact
            [type] => string
            [len] => 100
            [flags] => not_null
        )

    [4] => stdClass Object
        (
            [table] => Client
            [name] => email
            [type] => string
            [len] => 60
            [flags] => not_null
        )

    [5] => stdClass Object
        (
            [table] => Client
            [name] => signup
            [type] => date
            [len] => 10
            [flags] => not_null
        )

)
db_dataobject_generator   : CONNECT       : USING CACHED CONNECTION
Array
(
    [0] => dump for Client
    [1] => Array
        (
            [table] => Array
                (
                    [clientID] => 129
                    [client] => 130
                    [type] => 130
                    [contact] => 130
                    [email] => 130
                    [signup] => 134
                )

            [keys] => Array
                (
                    [clientID] => N
                )

        )

)
client   : GET       : clientID 30 Array
(
    [0] => clientID
)

client   : __find       : 1
client   : CONNECT       : USING CACHED CONNECTION
client   : CONNECT       : USING CACHED CONNECTION
client   : CONNECT       : USING CACHED CONNECTION
client   : QUERY       : SELECT * FROM Client  WHERE  Client.clientID = 30    
client   : __find       : CHECK autofetchd 1
client   : __find       : ABOUT TO AUTOFETCH
client   : FETCH       : a:6:{s:8:"clientID";s:2:"30";s:6:"client";s:8:"Internet";s:4:"type";s:10:"Anunciante";s:7:"contact";s:10:"Leandro S.";s:5:"email";s:13:"leandro@s.com";s:6:"signup";s:10:"2004-09-01";}
client   : fetchrow LINE       : clientID = 30
client   : fetchrow LINE       : client = Internet
client   : fetchrow LINE       : type = Anunciante
client   : fetchrow LINE       : contact = Leandro S.
client   : fetchrow LINE       : email = leandro@s.com
client   : fetchrow LINE       : signup = 2004-09-01
client   : fetchrow       : Client DONE
client   : __find       : DONE
Array
(
    [clientID] => 30
    [client] => Internet
    [type] => Anunciante
    [contact] => Leandro S.
    [email] => leandro@s.com
    [signup] => 2004-09-01
)



******sequences.
test2   : CONNECT       : USING CACHED CONNECTION
db_dataobject_generator   : CONNECT       : USING CACHED CONNECTION
db_dataobject_generator   : fillTable       : getting def for test/test2
db_dataobject_generator   : defs       : Array
(
    [0] => Array
        (
            [table] => test2
            [name] => id
            [type] => int
            [len] => 11
            [flags] => not_null primary_key
        )

    [1] => Array
        (
            [table] => test2
            [name] => name
            [type] => string
            [len] => 255
            [flags] => not_null
        )

    [2] => Array
        (
            [table] => test2
            [name] => username
            [type] => string
            [len] => 32
            [flags] => not_null
        )

    [3] => Array
        (
            [table] => test2
            [name] => password
            [type] => string
            [len] => 13
            [flags] => not_null binary
        )

    [4] => Array
        (
            [table] => test2
            [name] => firstname
            [type] => string
            [len] => 255
            [flags] => not_null
        )

    [5] => Array
        (
            [table] => test2
            [name] => lastname
            [type] => string
            [len] => 255
            [flags] => not_null
        )

)

TABLE STRUCTURE FOR test2
Array
(
    [0] => stdClass Object
        (
            [table] => test2
            [name] => id
            [type] => int
            [len] => 11
            [flags] => not_null primary_key
        )

    [1] => stdClass Object
        (
            [table] => test2
            [name] => name
            [type] => string
            [len] => 255
            [flags] => not_null
        )

    [2] => stdClass Object
        (
            [table] => test2
            [name] => username
            [type] => string
            [len] => 32
            [flags] => not_null
        )

    [3] => stdClass Object
        (
            [table] => test2
            [name] => password
            [type] => string
            [len] => 13
            [flags] => not_null binary
        )

    [4] => stdClass Object
        (
            [table] => test2
            [name] => firstname
            [type] => string
            [len] => 255
            [flags] => not_null
        )

    [5] => stdClass Object
        (
            [table] => test2
            [name] => lastname
            [type] => string
            [len] => 255
            [flags] => not_null
        )

)
db_dataobject_generator   : CONNECT       : USING CACHED CONNECTION
Array
(
    [0] => dump for test2
    [1] => Array
        (
            [table] => Array
                (
                    [id] => 129
                    [name] => 130
                    [username] => 130
                    [password] => 130
                    [firstname] => 130
                    [lastname] => 130
                )

            [keys] => Array
                (
                    [id] => K
                )

        )

)
test2   : CONNECT       : USING CACHED CONNECTION
test2   : QUERY       : INSERT INTO test2 (id , username ) VALUES ( 239 , 'yyyy' ) 

RET: 239
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject_generator   : CONNECT       : USING CACHED CONNECTION
db_dataobject_generator   : fillTable       : getting def for test/test2
db_dataobject_generator   : defs       : Array
(
    [0] => Array
        (
            [table] => test2
            [name] => id
            [type] => int
            [len] => 11
            [flags] => not_null primary_key
        )

    [1] => Array
        (
            [table] => test2
            [name] => name
            [type] => string
            [len] => 255
            [flags] => not_null
        )

    [2] => Array
        (
            [table] => test2
            [name] => username
            [type] => string
            [len] => 32
            [flags] => not_null
        )

    [3] => Array
        (
            [table] => test2
            [name] => password
            [type] => string
            [len] => 13
            [flags] => not_null binary
        )

    [4] => Array
        (
            [table] => test2
            [name] => firstname
            [type] => string
            [len] => 255
            [flags] => not_null
        )

    [5] => Array
        (
            [table] => test2
            [name] => lastname
            [type] => string
            [len] => 255
            [flags] => not_null
        )

)

TABLE STRUCTURE FOR test2
Array
(
    [0] => stdClass Object
        (
            [table] => test2
            [name] => id
            [type] => int
            [len] => 11
            [flags] => not_null primary_key
        )

    [1] => stdClass Object
        (
            [table] => test2
            [name] => name
            [type] => string
            [len] => 255
            [flags] => not_null
        )

    [2] => stdClass Object
        (
            [table] => test2
            [name] => username
            [type] => string
            [len] => 32
            [flags] => not_null
        )

    [3] => stdClass Object
        (
            [table] => test2
            [name] => password
            [type] => string
            [len] => 13
            [flags] => not_null binary
        )

    [4] => stdClass Object
        (
            [table] => test2
            [name] => firstname
            [type] => string
            [len] => 255
            [flags] => not_null
        )

    [5] => stdClass Object
        (
            [table] => test2
            [name] => lastname
            [type] => string
            [len] => 255
            [flags] => not_null
        )

)
db_dataobject_generator   : CONNECT       : USING CACHED CONNECTION
Array
(
    [0] => dump for test2
    [1] => Array
        (
            [table] => Array
                (
                    [id] => 129
                    [name] => 130
                    [username] => 130
                    [password] => 130
                    [firstname] => 130
                    [lastname] => 130
                )

            [keys] => Array
                (
                    [id] => K
                )

        )

)
myproject_dataobject_test2   : __find       : 
myproject_dataobject_test2   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_test2   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_test2   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_test2   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_test2   : QUERY       : SELECT * FROM test2     
myproject_dataobject_test2   : __find       : CHECK autofetchd 
myproject_dataobject_test2   : __find       : DONE
myproject_dataobject_test2   : FETCH       : a:6:{s:2:"id";s:3:"239";s:4:"name";s:0:"";s:8:"username";s:4:"yyyy";s:8:"password";s:0:"";s:9:"firstname";s:0:"";s:8:"lastname";s:0:"";}
myproject_dataobject_test2   : fetchrow LINE       : id = 239
myproject_dataobject_test2   : fetchrow LINE       : name = 
myproject_dataobject_test2   : fetchrow LINE       : username = yyyy
myproject_dataobject_test2   : fetchrow LINE       : password = 
myproject_dataobject_test2   : fetchrow LINE       : firstname = 
myproject_dataobject_test2   : fetchrow LINE       : lastname = 
myproject_dataobject_test2   : fetchrow       : test2 DONE
myproject_dataobject_test2 Object
(
    [N] => 1
    [id] => 239
    [name] => 
    [username] => yyyy
    [password] => 
    [firstname] => 
    [lastname] => 
)
myproject_dataobject_test2   : FETCH       : N;
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject_generator   : CONNECT       : USING CACHED CONNECTION
db_dataobject_generator   : fillTable       : getting def for test/testproxy
db_dataobject_generator   : defs       : Array
(
    [0] => Array
        (
            [table] => testproxy
            [name] => id
            [type] => int
            [len] => 11
            [flags] => not_null primary_key auto_increment
        )

    [1] => Array
        (
            [table] => testproxy
            [name] => name
            [type] => string
            [len] => 255
            [flags] => not_null
        )

    [2] => Array
        (
            [table] => testproxy
            [name] => username
            [type] => string
            [len] => 32
            [flags] => not_null
        )

    [3] => Array
        (
            [table] => testproxy
            [name] => password
            [type] => string
            [len] => 13
            [flags] => not_null binary
        )

    [4] => Array
        (
            [table] => testproxy
            [name] => firstname
            [type] => string
            [len] => 255
            [flags] => not_null
        )

    [5] => Array
        (
            [table] => testproxy
            [name] => lastname
            [type] => string
            [len] => 255
            [flags] => not_null
        )

)

TABLE STRUCTURE FOR testproxy
Array
(
    [0] => stdClass Object
        (
            [table] => testproxy
            [name] => id
            [type] => int
            [len] => 11
            [flags] => not_null primary_key auto_increment
        )

    [1] => stdClass Object
        (
            [table] => testproxy
            [name] => name
            [type] => string
            [len] => 255
            [flags] => not_null
        )

    [2] => stdClass Object
        (
            [table] => testproxy
            [name] => username
            [type] => string
            [len] => 32
            [flags] => not_null
        )

    [3] => stdClass Object
        (
            [table] => testproxy
            [name] => password
            [type] => string
            [len] => 13
            [flags] => not_null binary
        )

    [4] => stdClass Object
        (
            [table] => testproxy
            [name] => firstname
            [type] => string
            [len] => 255
            [flags] => not_null
        )

    [5] => stdClass Object
        (
            [table] => testproxy
            [name] => lastname
            [type] => string
            [len] => 255
            [flags] => not_null
        )

)
db_dataobject_generator   : CONNECT       : USING CACHED CONNECTION
Array
(
    [0] => dump for testproxy
    [1] => Array
        (
            [table] => Array
                (
                    [id] => 129
                    [name] => 130
                    [username] => 130
                    [password] => 130
                    [firstname] => 130
                    [lastname] => 130
                )

            [keys] => Array
                (
                    [id] => N
                )

        )

)
myproject_dataobject_testproxy Object
(
    [_DB_DataObject_version] => @version@
    [__table] => testproxy
    [N] => 0
    [_database_dsn] => 
    [_database_dsn_md5] => 
    [_database] => 
    [_query] => Array
        (
            [condition] => 
            [group_by] => 
            [order_by] => 
            [having] => 
            [limit] => 
            [data_select] => *
        )

    [_DB_resultid] => 
    [_link_loaded] => 
    [_join] => 
    [_lastError] => 
    [id] => 
    [name] => 
    [username] => 
    [password] => 
    [firstname] => 
    [lastname] => 
)
myproject_dataobject_testproxy2   : CONNECT       : USING CACHED CONNECTION
Array
(
    [id] => 129
    [name] => 130
    [username] => 130
    [password] => 130
    [firstname] => 130
    [lastname] => 130
)
myproject_dataobject_testproxy   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_testproxy   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_testproxy   : QUERY       : INSERT INTO testproxy () VALUES () 
1myproject_dataobject_testproxy   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_testproxy   : QUERY       : INSERT INTO testproxy () VALUES () 
2test   : CONNECT       : USING CACHED CONNECTION
test   : QUERY       : DROP TABLE IF EXISTS `page_module`
test   : CONNECT       : USING CACHED CONNECTION
test   : QUERY       : 
            CREATE TABLE `page_module` (
                `page_id` mediumint(8) unsigned NOT NULL default '0',
                `module_id` mediumint(8) unsigned NOT NULL default '0',
                `place` tinyint(3) unsigned NOT NULL default '0',
                `title` varchar(50) NOT NULL default '',
                `position` varchar(10) NOT NULL default 'top',
                PRIMARY KEY  (`page_id`,`module_id`)
            ) TYPE=MyISAM;
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject_generator   : CONNECT       : USING CACHED CONNECTION
db_dataobject_generator   : fillTable       : getting def for test/page_module
db_dataobject_generator   : defs       : Array
(
    [0] => Array
        (
            [table] => page_module
            [name] => page_id
            [type] => int
            [len] => 8
            [flags] => not_null primary_key unsigned
        )

    [1] => Array
        (
            [table] => page_module
            [name] => module_id
            [type] => int
            [len] => 8
            [flags] => not_null primary_key unsigned
        )

    [2] => Array
        (
            [table] => page_module
            [name] => place
            [type] => int
            [len] => 3
            [flags] => not_null unsigned
        )

    [3] => Array
        (
            [table] => page_module
            [name] => title
            [type] => string
            [len] => 50
            [flags] => not_null
        )

    [4] => Array
        (
            [table] => page_module
            [name] => position
            [type] => string
            [len] => 10
            [flags] => not_null
        )

)

TABLE STRUCTURE FOR page_module
Array
(
    [0] => stdClass Object
        (
            [table] => page_module
            [name] => page_id
            [type] => int
            [len] => 8
            [flags] => not_null primary_key unsigned
        )

    [1] => stdClass Object
        (
            [table] => page_module
            [name] => module_id
            [type] => int
            [len] => 8
            [flags] => not_null primary_key unsigned
        )

    [2] => stdClass Object
        (
            [table] => page_module
            [name] => place
            [type] => int
            [len] => 3
            [flags] => not_null unsigned
        )

    [3] => stdClass Object
        (
            [table] => page_module
            [name] => title
            [type] => string
            [len] => 50
            [flags] => not_null
        )

    [4] => stdClass Object
        (
            [table] => page_module
            [name] => position
            [type] => string
            [len] => 10
            [flags] => not_null
        )

)
db_dataobject_generator   : CONNECT       : USING CACHED CONNECTION
Array
(
    [0] => dump for page_module
    [1] => Array
        (
            [table] => Array
                (
                    [page_id] => 129
                    [module_id] => 129
                    [place] => 129
                    [title] => 130
                    [position] => 130
                )

            [keys] => Array
                (
                    [page_id] => K
                    [module_id] => K
                )

        )

)
myproject_dataobject_page_module   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_page_module   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_page_module   : QUERY       : INSERT INTO page_module (page_id , module_id , position ) VALUES ( 1 ,  1 , 'top' ) 
test   : CONNECT       : USING CACHED CONNECTION
test   : QUERY       : DROP TABLE IF EXISTS  typetest
test   : CONNECT       : USING CACHED CONNECTION
test   : QUERY       : 
            CREATE TABLE typetest (
                id int(11) NOT NULL auto_increment PRIMARY KEY,
                a_date date default '',
                a_time time NOT NULL default '',
                a_datetime  datetime default '',
                b_date  datetime default '',
                ts timestamp
            ) TYPE=MyISAM;
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject_generator   : CONNECT       : USING CACHED CONNECTION
db_dataobject_generator   : fillTable       : getting def for test/typetest
db_dataobject_generator   : defs       : Array
(
    [0] => Array
        (
            [table] => typetest
            [name] => id
            [type] => int
            [len] => 11
            [flags] => not_null primary_key auto_increment
        )

    [1] => Array
        (
            [table] => typetest
            [name] => a_date
            [type] => date
            [len] => 10
            [flags] => 
        )

    [2] => Array
        (
            [table] => typetest
            [name] => a_time
            [type] => time
            [len] => 8
            [flags] => not_null
        )

    [3] => Array
        (
            [table] => typetest
            [name] => a_datetime
            [type] => datetime
            [len] => 19
            [flags] => 
        )

    [4] => Array
        (
            [table] => typetest
            [name] => b_date
            [type] => datetime
            [len] => 19
            [flags] => 
        )

    [5] => Array
        (
            [table] => typetest
            [name] => ts
            [type] => timestamp
            [len] => 14
            [flags] => not_null unsigned zerofill timestamp
        )

)

TABLE STRUCTURE FOR typetest
Array
(
    [0] => stdClass Object
        (
            [table] => typetest
            [name] => id
            [type] => int
            [len] => 11
            [flags] => not_null primary_key auto_increment
        )

    [1] => stdClass Object
        (
            [table] => typetest
            [name] => a_date
            [type] => date
            [len] => 10
            [flags] => 
        )

    [2] => stdClass Object
        (
            [table] => typetest
            [name] => a_time
            [type] => time
            [len] => 8
            [flags] => not_null
        )

    [3] => stdClass Object
        (
            [table] => typetest
            [name] => a_datetime
            [type] => datetime
            [len] => 19
            [flags] => 
        )

    [4] => stdClass Object
        (
            [table] => typetest
            [name] => b_date
            [type] => datetime
            [len] => 19
            [flags] => 
        )

    [5] => stdClass Object
        (
            [table] => typetest
            [name] => ts
            [type] => timestamp
            [len] => 14
            [flags] => not_null unsigned zerofill timestamp
        )

)
db_dataobject_generator   : CONNECT       : USING CACHED CONNECTION
Array
(
    [0] => dump for typetest
    [1] => Array
        (
            [table] => Array
                (
                    [id] => 129
                    [a_date] => 6
                    [a_time] => 138
                    [a_datetime] => 14
                    [b_date] => 14
                    [ts] => 384
                )

            [keys] => Array
                (
                    [id] => N
                )

        )

)
myproject_dataobject_typetest   : CONNECT       : USING CACHED CONNECTION
Array
(
    [id] => 129
    [a_date] => 6
    [a_time] => 138
    [a_datetime] => 14
    [b_date] => 14
    [ts] => 384
)
myproject_dataobject_typetest Object
(
    [_DB_DataObject_version] => @version@
    [__table] => typetest
    [N] => 0
    [_database_dsn] => 
    [_database_dsn_md5] => 2f3fb5552c1aaa2a1ddef961a3506ebc
    [_database] => test
    [_query] => Array
        (
            [condition] => 
            [group_by] => 
            [order_by] => 
            [having] => 
            [limit] => 
            [data_select] => *
        )

    [_DB_resultid] => 
    [_link_loaded] => 
    [_join] => 
    [_lastError] => 
    [id] => 
    [a_date] => 2003-01-01
    [a_time] => 12:00:00
    [a_datetime] => 2004-10-13 01:00:00
    [b_date] => null
    [ts] => 
)
myproject_dataobject_typetest   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_typetest   : QUERY       : INSERT INTO typetest (a_date , a_time , a_datetime , b_date ) VALUES ('2003-01-01' , '12:00:00' , '2004-10-13 01:00:00' ,  NULL ) 
myproject_dataobject_typetest   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_typetest   : GET       : id 1 Array
(
    [0] => id
)

myproject_dataobject_typetest   : __find       : 1
myproject_dataobject_typetest   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_typetest   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_typetest   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_typetest   : QUERY       : SELECT * FROM typetest  WHERE  typetest.id = 1    
myproject_dataobject_typetest   : __find       : CHECK autofetchd 1
myproject_dataobject_typetest   : __find       : ABOUT TO AUTOFETCH
myproject_dataobject_typetest   : FETCH       : a:6:{s:2:"id";s:1:"1";s:6:"a_date";s:10:"2003-01-01";s:6:"a_time";s:8:"12:00:00";s:10:"a_datetime";s:19:"2004-10-13 01:00:00";s:6:"b_date";N;s:2:"ts";s:14:"20041014103657";}
myproject_dataobject_typetest   : fetchrow LINE       : id = 1
myproject_dataobject_typetest   : fetchrow LINE       : a_date = 2003-01-01
myproject_dataobject_typetest   : fetchrow LINE       : a_time = 12:00:00
myproject_dataobject_typetest   : fetchrow LINE       : a_datetime = 2004-10-13 01:00:00
myproject_dataobject_typetest   : fetchrow LINE       : b_date = 
myproject_dataobject_typetest   : fetchrow LINE       : ts = 20041014103657
myproject_dataobject_typetest   : fetchrow       : typetest DONE
myproject_dataobject_typetest   : __find       : DONE
myproject_dataobject_typetest   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_typetest   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_typetest   : 3       : got keys as a:1:{i:0;s:2:"id";}
myproject_dataobject_typetest   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_typetest   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_typetest   : QUERY       : UPDATE  typetest  SET a_date = '2003-01-01' , a_time = '12:00:00' , a_datetime = '2004-10-13 01:00:00' , b_date = '1970-01-01 07:59:59'   WHERE  typetest.id = 1 
myproject_dataobject_typetest   : 1       : Clearing Cache for myproject_dataobject_typetest
TIMESTAMP = 14/10/2004 10:36:57
myproject_dataobject_typetest Object
(
    [_DB_DataObject_version] => @version@
    [__table] => typetest
    [N] => 1
    [_database_dsn] => 
    [_database_dsn_md5] => 2f3fb5552c1aaa2a1ddef961a3506ebc
    [_database] => test
    [_DB_resultid] => 16
    [_link_loaded] => 
    [_join] => 
    [_lastError] => 
    [id] => 1
    [a_date] => 2003-01-01
    [a_time] => 12:00:00
    [a_datetime] => 2004-10-13 01:00:00
    [b_date] => 1970-01-01 07:59:59
    [ts] => 20041014103657
    [_query] => Array
        (
            [condition] => 
            [group_by] => 
            [order_by] => 
            [having] => 
            [limit] => 
            [data_select] => *
        )

)
myproject_dataobject_testset   : QUERY       : INSERT INTO testset (name , gender ) VALUES ('fred' , 'male' ) 
myproject_dataobject_testset   : __find       : 1
myproject_dataobject_testset   : QUERY       : SELECT * FROM testset     
myproject_dataobject_testset   : __find       : CHECK autofetchd 1
myproject_dataobject_testset   : __find       : ABOUT TO AUTOFETCH
myproject_dataobject_testset   : FETCH       : a:3:{s:2:"id";s:1:"1";s:4:"name";s:4:"fred";s:6:"gender";s:4:"male";}
myproject_dataobject_testset   : __find       : DONE
Array
(
    [id] => 1
    [name] => fred
    [gender] => male
)
db_dataobject   : QUERY       : DROP SEQUENCE response_response_id_seq
db_dataobject   : QUERY       : DROP TABLE seqtest
db_dataobject   : QUERY       : CREATE SEQUENCE response_response_id_seq INCREMENT 1 START 1
db_dataobject   : QUERY       : 
            CREATE TABLE seqtest (
                id INT NOT NULL UNIQUE   default nextval( 'response_response_id_seq' ),
                xxx varchar(32),
                price double precision
            )
Array
(
    [id] => 129
    [xxx] => 2
    [price] => 1
)
myproject_dataobject_seqtest   : QUERY       : INSERT INTO seqtest (id , xxx ) VALUES ( 1 , 'Fred' ) 
string(1) "1"
myproject_dataobject_seqtest   : QUERY       : INSERT INTO seqtest (id , xxx ) VALUES ( 2 , 'Blogs' ) 
string(1) "2"
myproject_dataobject_seqtest   : QUERY       : INSERT INTO seqtest (xxx ) VALUES ('Jones' ) 
string(1) "3"
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject   : QUERY       : DROP SEQUENCE items_seq
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject   : QUERY       : DROP TABLE itemtest
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject   : QUERY       : CREATE SEQUENCE items_seq INCREMENT 1 START 1
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject   : QUERY       : 
            create table itemtest (
                id int not null primary key default nextval('items_seq'),
                word varchar(100) not null constraint word_unique unique
             )
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject_generator   : CONNECT       : USING CACHED CONNECTION
db_dataobject_generator   : fillTable       : getting def for test/itemtest
db_dataobject_generator   : defs       : Array
(
    [0] => Array
        (
            [table] => itemtest
            [name] => id
            [type] => int4
            [len] => 4
            [flags] => not_null default_nextval%28items_seq%29 primary_key
        )

    [1] => Array
        (
            [table] => itemtest
            [name] => word
            [type] => varchar
            [len] => -1
            [flags] => not_null unique_key
        )

)

TABLE STRUCTURE FOR itemtest
Array
(
    [0] => stdClass Object
        (
            [table] => itemtest
            [name] => id
            [type] => int4
            [len] => 4
            [flags] => not_null default_nextval%28items_seq%29 primary_key
        )

    [1] => stdClass Object
        (
            [table] => itemtest
            [name] => word
            [type] => varchar
            [len] => -1
            [flags] => not_null unique_key
        )

)
db_dataobject_generator   : CONNECT       : USING CACHED CONNECTION
Array
(
    [0] => dump for itemtest
    [1] => Array
        (
            [table] => Array
                (
                    [id] => 129
                    [word] => 130
                )

            [keys] => Array
                (
                    [id] => N
                )

        )

)
myproject_dataobject_itemtest   : CONNECT       : USING CACHED CONNECTION
Array
(
    [id] => 129
    [word] => 130
)
Array
(
    [0] => id
)
Array
(
    [0] => id
    [1] => 
    [2] => 
)
myproject_dataobject_itemtest   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_itemtest   : QUERY       : INSERT INTO itemtest (id , word ) VALUES ( 41 , 'test' ) 
myproject_dataobject_itemtest   : CONNECT       : USING CACHED CONNECTION
Array
(
    [0] => id
    [1] => 1
    [2] => items_seq
)
myproject_dataobject_itemtest   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_itemtest   : QUERY       : INSERT INTO itemtest (word ) VALUES ('test2' ) 
insert 1
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject   : QUERY       : DROP SEQUENCE bool_seq
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject   : QUERY       : DROP TABLE booltest
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject   : QUERY       : CREATE SEQUENCE bool_seq INCREMENT 1 START 1
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject   : QUERY       : 
            create table booltest (
                id int not null primary key default nextval('items_seq'),
                bo_test boolean default 'f',
                bo_int int default 0
             )
db_dataobject   : CONNECT       : USING CACHED CONNECTION
db_dataobject_generator   : CONNECT       : USING CACHED CONNECTION
db_dataobject_generator   : fillTable       : getting def for test/booltest
db_dataobject_generator   : defs       : Array
(
    [0] => Array
        (
            [table] => booltest
            [name] => id
            [type] => int4
            [len] => 4
            [flags] => not_null default_nextval%28items_seq%29 primary_key
        )

    [1] => Array
        (
            [table] => booltest
            [name] => bo_test
            [type] => bool
            [len] => 1
            [flags] => default_false
        )

    [2] => Array
        (
            [table] => booltest
            [name] => bo_int
            [type] => int4
            [len] => 4
            [flags] => default_0
        )

)

TABLE STRUCTURE FOR booltest
Array
(
    [0] => stdClass Object
        (
            [table] => booltest
            [name] => id
            [type] => int4
            [len] => 4
            [flags] => not_null default_nextval%28items_seq%29 primary_key
        )

    [1] => stdClass Object
        (
            [table] => booltest
            [name] => bo_test
            [type] => bool
            [len] => 1
            [flags] => default_false
        )

    [2] => stdClass Object
        (
            [table] => booltest
            [name] => bo_int
            [type] => int4
            [len] => 4
            [flags] => default_0
        )

)
db_dataobject_generator   : CONNECT       : USING CACHED CONNECTION
Array
(
    [0] => dump for booltest
    [1] => Array
        (
            [table] => Array
                (
                    [id] => 129
                    [bo_test] => 18
                    [bo_int] => 1
                )

            [keys] => Array
                (
                    [id] => N
                )

        )

)
myproject_dataobject_booltest   : __find       : 
myproject_dataobject_booltest   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_booltest   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_booltest   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_booltest   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_booltest   : QUERY       : SELECT * FROM booltest  WHERE  booltest.bo_test  = TRUE AND  booltest.bo_int = 0    
myproject_dataobject_booltest   : __find       : CHECK autofetchd 
myproject_dataobject_booltest   : __find       : DONE
myproject_dataobject_booltest   : CONNECT       : USING CACHED CONNECTION
myproject_dataobject_booltest   : QUERY       : INSERT INTO booltest (id , bo_test , bo_int ) VALUES ( 4 , TRUE ,  1 ) 
--GET--
--POST--
--EXPECT--
